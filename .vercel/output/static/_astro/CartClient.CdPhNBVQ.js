import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{r as a}from"./index.bmQhMlF6.js";import{r as d,f as n}from"./currency.DLCe802R.js";import{ensureCart as o,loadCart as l,removeItem as x}from"./cart.BBzTRO1A.js";import"./index.yBjzXJbu.js";import"./supabaseClient.DQBRCACc.js";import"./index.FHxf1fDt.js";function C(){const[r,c]=a.useState({cart:null,items:[]}),[s,u]=a.useState(d());a.useEffect(()=>{(async()=>{await o(s);const t=await l();t&&c(t)})()},[s]);const m=r.cart?.total_cents||0;return e.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[e.jsx("div",{className:"md:col-span-2 space-y-4",children:r.items.map(t=>e.jsxs("div",{className:"card p-4 flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:t.title||"Item"}),e.jsxs("div",{className:"text-sm text-neutral-600",children:["Qty: ",t.quantity]})]}),e.jsx("div",{className:"text-sm",children:n(t.unit_price_cents,s)}),e.jsx("button",{className:"btn btn-outline",onClick:async()=>{await x(t.id);const i=await l();i&&c(i)},children:"Remove"})]},t.id))}),e.jsxs("aside",{className:"card p-4 h-fit",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-neutral-600",children:"Total"}),e.jsx("div",{className:"font-semibold",children:n(m,s)})]}),e.jsx("a",{href:"/checkout",className:"btn btn-primary w-full mt-4 text-center",children:"Checkout"})]})]})}export{C as default};
